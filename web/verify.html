<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <title>Doğrulama</title>
  <link rel="stylesheet" href="/assets/app.css?v=2">
</head>
<body>
  <div class="center">
    <div class="title">E-posta Doğrulama</div>
    <div class="row"><label>E-posta</label><input id="email" type="email"></div>
    <div class="row"><label>Doğrulama Kodu</label><input id="code" type="text" placeholder="örn. a1b2c3"></div>
    <button class="btn" onclick="verify()">Doğrula</button>
    <div class="alt"><a href="/login.html">Zaten doğruladım, giriş yap</a></div>
    <div id="m" class="msg"></div>
  </div>
<script>
const e=localStorage.getItem('pendingEmail'); if(e) document.getElementById('email').value=e;
async function verify(){
  const email=document.getElementById('email').value.trim();
  const code=document.getElementById('code').value.trim();
  const r=await fetch('/api/verify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,code})});
  const j=await r.json();
  if(!r.ok){document.getElementById('m').textContent=j.error||'Hata';return;}
  location.href='/login.html';
}
</script>
</body>
</html>
