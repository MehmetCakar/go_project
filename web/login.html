<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <title>Giriş Yap</title>
  <link rel="stylesheet" href="/assets/app.css?v=2">
</head>
<body>
  <div class="center">
    <div class="title">Giriş Yap</div>
    <div class="row"><label>E-posta</label><input id="email" type="email" autocomplete="email"></div>
    <div class="row"><label>Şifre</label><input id="p" type="password" autocomplete="current-password"></div>
    <button class="btn" onclick="login()">Giriş Yap</button>
    <div class="alt"><a href="/signup.html">Kayıt olmak istiyorum</a></div>
    <div id="m" class="msg"></div>
  </div>
<script>
const e=localStorage.getItem('pendingEmail'); if(e) document.getElementById('email').value=e;
async function login(){
  const email=document.getElementById('email').value.trim();
  const password=document.getElementById('p').value;
  const r=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});
  const j=await r.json();
  if(!r.ok){document.getElementById('m').textContent=j.error||'Hata';return;}
  location.href='/'; // ürünlere
}
</script>
</body>
</html>
